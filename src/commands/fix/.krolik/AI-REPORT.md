# AI Code Quality Report

> Generated by krolik-cli at 2025-12-24T02:29:02.829Z

## Summary

| Metric | Value |
|--------|-------|
| Total Issues | 100 |
| Auto-fixable | 75 |
| Manual Required | 25 |
| Total Effort | 13h 48min |

### By Priority

- ðŸ”´ **CRITICAL**: 6 issues
- ðŸŸ  **HIGH**: 4 issues
- ðŸŸ¡ **MEDIUM**: 20 issues
- ðŸŸ¢ **LOW**: 70 issues

---

## âš ï¸ AI Rules (Read First!)

> **IMPORTANT:** Before starting any work, read these files for project-specific rules and conventions.

- `CLAUDE.md` (root)

---

## Git Status

- **Branch:** `dev`
- **Changes:** 78 modified, 37 untracked, 1 staged

### Recent Commits

- `d60c715` feat(status): add AI-friendly output with next-action and do-not sections *(22 hours ago)*
- `9638e1a` refactor(lib): migrate to @namespace structure *(25 hours ago)*
- `489142e` fix(refine): check monorepo root for lockfile and README *(26 hours ago)*

---

## ðŸŽ¯ Next Action

**ðŸ”´ Read AI rules files: CLAUDE.md**

> Project has AI configuration files that define conventions and rules

---

## ðŸš« Do Not

- Do not commit without running typecheck first
- Do not push directly to main/master branch
- Do not ignore TypeScript errors with @ts-ignore
- Do not use `any` type â€” use proper type definitions
- Do not use magic numbers â€” extract to named constants
- Do not write functions longer than 50 lines â€” extract helper functions
- Do not export more than 5 items per file â€” split into modules
- Do not leave console.log in production code

---

## Quick Wins

These issues can be auto-fixed in seconds:

- [ ] `index.ts:66` â€” Unexpected console statement (1 min)
- [ ] `index.ts:84` â€” Unexpected console statement (1 min)
- [ ] `index.ts:85` â€” Unexpected console statement (1 min)
- [ ] `index.ts:89` â€” Unexpected console statement (1 min)
- [ ] `index.ts:90` â€” Unexpected console statement (1 min)
- [ ] `index.ts:91` â€” Unexpected console statement (1 min)
- [ ] `index.ts:92` â€” Unexpected console statement (1 min)
- [ ] `index.ts:96` â€” Unexpected console statement (1 min)
- [ ] `index.ts:97` â€” Unexpected console statement (1 min)
- [ ] `index.ts:98` â€” Unexpected console statement (1 min)

---

## Hotspot Files

Files with the most issues:

| File | Issues | Priority |
|------|--------|----------|
| `src/commands/fix/index.ts` | 41 | ðŸŸ  high |
| `index.ts` | 38 | ðŸŸ¡ medium |
| `src/commands/fix/types.ts` | 12 | ðŸ”´ critical |
| `types.ts` | 5 | ðŸŸ¡ medium |
| `src/commands/fix/plan.ts` | 3 | ðŸŸ  high |

---

## Issues by Priority

### ðŸ”´ Critical Issues (Fix Immediately)

> These issues may cause build failures or runtime errors
> **Effort**: 1h 25min | **Auto-fixable**: 5/6

- [ ] `src/commands/fix/types.ts:449` â€” Function "isFixerEnabledLegacy" has complexity 49 (max: 10) (1h)
- [ ] `src/commands/fix/types.ts:29` â€” @ts-ignore suppresses TypeScript errors (5 min) [AUTO]
- [ ] `src/commands/fix/types.ts:358` â€” @ts-ignore suppresses TypeScript errors (5 min) [AUTO]
- [ ] `src/commands/fix/types.ts:400` â€” @ts-ignore suppresses TypeScript errors (5 min) [AUTO]
- [ ] `src/commands/fix/types.ts:400` â€” @ts-nocheck disables TypeScript checking for entire file (5 min) [AUTO]
- [ ] `src/commands/fix/types.ts:488` â€” @ts-ignore suppresses TypeScript errors (5 min) [AUTO]

### ðŸŸ  High Priority Issues

> These issues should be addressed in the current sprint
> **Effort**: 4h | **Auto-fixable**: 0/4

- [ ] `src/commands/fix/types.ts` â€” File exports 22 items (max: 5) (1h)
- [ ] `src/commands/fix/plan.ts` â€” File exports 6 items (max: 5) (1h)
- [ ] `src/commands/fix/index.ts` â€” File has 12 functions (max: 10) (1h)
- [ ] `src/commands/fix/index.ts` â€” File exports 6 items (max: 5) (1h)

### ðŸŸ¡ Medium Priority Issues

> Address these for better maintainability
> **Effort**: 7h 13min | **Auto-fixable**: 0/20

- [ ] `src/commands/fix/types.ts` â€” File has 548 lines (max: 400) (1h 20min)
- [ ] `src/commands/fix/types.ts:449` â€” Function "isFixerEnabledLegacy" has 89 lines (max: 50) (40 min)
- [ ] `types.ts:212` â€” Hardcoded number: 50 (7 min)
- [ ] `types.ts:214` â€” Hardcoded number: 5 (7 min)
- [ ] `types.ts:215` â€” Hardcoded number: 400 (7 min)
- ... and 15 more issues

### ðŸŸ¢ Low Priority Issues (Optional)

> Nice to fix but not urgent
> **Effort**: 1h 10min | **Auto-fixable**: 70/70

- [ ] `index.ts:66` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:84` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:85` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:89` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:90` â€” Unexpected console statement (1 min) [AUTO]
- ... and 65 more issues

---

## Recommended Action Plan

Execute these steps in order:

#### step-1: ðŸ”§ FIX ðŸ”´

**File**: `src/commands/fix/types.ts:29`
**Effort**: 5 min

@ts-ignore suppresses TypeScript errors

**Current code:**
```typescript
   24:   | 'hardcoded'     // Magic numbers, hardcoded strings
   25:   | 'complexity'    // Function/file complexity
   26:   | 'mixed-concerns' // UI + logic mixed
   27:   | 'size'          // File too large
   28:   | 'documentation' // Missing JSDoc on exports
â†’  29:   | 'type-safety'   // any, as, @ts-ignore usage
   30:   | 'circular-dep'  // Circular dependencies
   31:   | 'lint'          // Universal lint rules (no-console, no-debugger, etc.)
   32:   | 'composite'     // Composite transform operations
   33:   | 'agent'         // AI agent operations
   34:   | 'refine';       // @namespace structure violations
```

**Suggested fix:**
```diff
+ Fix the type error instead of ignoring it
```

> Fix type-safety issue

#### step-2: ðŸ”§ FIX ðŸ”´

**File**: `src/commands/fix/types.ts:358`
**Effort**: 5 min

@ts-ignore suppresses TypeScript errors

**Current code:**
```typescript
  353:   fixDebugger?: boolean;
  354:   /** Fix alert() calls */
  355:   fixAlert?: boolean;
  356: 
  357:   // Type-safety fixers
â†’ 358:   /** Fix @ts-ignore comments */
  359:   fixTsIgnore?: boolean;
  360:   /** Fix `any` type usage */
  361:   fixAny?: boolean;
  362: 
  363:   // Complexity fixers
```

**Suggested fix:**
```diff
+ Fix the type error instead of ignoring it
```

> Fix type-safety issue

#### step-3: ðŸ”§ FIX ðŸ”´

**File**: `src/commands/fix/types.ts:400`
**Effort**: 5 min

@ts-ignore suppresses TypeScript errors

**Current code:**
```typescript
  395:     }
  396:   }
  397: 
  398:   // Safe: unlikely to break anything
  399:   if (category === 'type-safety') {
â†’ 400:     if (message.includes('@ts-ignore') || message.includes('@ts-nocheck')) {
  401:       return 'safe';
  402:     }
  403:   }
  404: 
  405:   // Everything else is risky
```

**Suggested fix:**
```diff
+ Fix the type error instead of ignoring it
```

> Fix type-safety issue

#### step-4: ðŸ”§ FIX ðŸ”´

**File**: `src/commands/fix/types.ts:400`
**Effort**: 5 min

@ts-nocheck disables TypeScript checking for entire file

**Current code:**
```typescript
  395:     }
  396:   }
  397: 
  398:   // Safe: unlikely to break anything
  399:   if (category === 'type-safety') {
â†’ 400:     if (message.includes('@ts-ignore') || message.includes('@ts-nocheck')) {
  401:       return 'safe';
  402:     }
  403:   }
  404: 
  405:   // Everything else is risky
```

**Suggested fix:**
```diff
+ Remove @ts-nocheck and fix type errors
```

> Fix type-safety issue

#### step-5: ðŸ”§ FIX ðŸ”´

**File**: `src/commands/fix/types.ts:488`
**Effort**: 5 min

@ts-ignore suppresses TypeScript errors

**Current code:**
```typescript
  483:     }
  484:   }
  485: 
  486:   // Type-safety category
  487:   if (category === 'type-safety') {
â†’ 488:     if (msg.includes('@ts-ignore') || msg.includes('ts-ignore')) {
  489:       if (options.fixTsIgnore === false) return false;
  490:       if (hasExplicitFlags) return !!options.fixTsIgnore;
  491:       return true;
  492:     }
  493:     if (msg.includes('any')) {
```

**Suggested fix:**
```diff
+ Fix the type error instead of ignoring it
```

> Fix type-safety issue

---

## File Contexts

Detailed information about affected files:

### `index.ts`

- **Purpose**: Module (main: listFixers)
- **Type**: util
- **Metrics**: 506 lines, 12 functions, avg complexity 6

**Exports**: `getFixDifficulty`, `findStrategy`, `applyFix`, `applyFixes`, `createBackup`, `rollbackFix`

**Imports**: `chalk`, `../../types`, `./types`, `./plan`, `./formatters`, `./applier`, `./git-backup`, `./core/file-cache`, `./strategies/shared`, `./fixers`, `./audit-reader`

### `types.ts`

- **Purpose**: Module (main: getFixDifficulty)
- **Type**: unknown
- **Metrics**: 548 lines, 5 functions, avg complexity 12

**Exports**: `QualitySeverity`, `QualityCategory`, `QualityIssue`, `SplitSuggestion`, `FunctionInfo`, `FileAnalysis`, `HardcodedValue`, `RecommendationItem`, `QualityReport`, `QualityOptions`, `Thresholds`, `DEFAULT_THRESHOLDS`, `ThresholdOverride`, `FixAction`, `FixOperation`, `FixResult`, `FixStrategy`, `FixOptions`, `FixDifficulty`, `getFixDifficulty`, `isFixerEnabled`, `filterIssuesByFixerFlags`

**Imports**: `../../types`

---

*Use `krolik fix --ai-execute AI-REPORT.md` to execute this plan automatically.*
