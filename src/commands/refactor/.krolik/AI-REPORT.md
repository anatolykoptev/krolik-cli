# AI Code Quality Report

> Generated by krolik-cli at 2025-12-24T03:44:18.533Z

## Summary

| Metric | Value |
|--------|-------|
| Total Issues | 100 |
| Auto-fixable | 34 |
| Manual Required | 66 |
| Total Effort | 30h 48min |

### By Priority

- ðŸ”´ **CRITICAL**: 1 issues
- ðŸŸ  **HIGH**: 10 issues
- ðŸŸ¡ **MEDIUM**: 55 issues
- ðŸŸ¢ **LOW**: 34 issues

---

## Git Status

- **Branch:** `dev`
- **Changes:** 94 modified, 37 untracked, 1 staged

### Recent Commits

- `d60c715` feat(status): add AI-friendly output with next-action and do-not sections *(23 hours ago)*
- `9638e1a` refactor(lib): migrate to @namespace structure *(27 hours ago)*
- `489142e` fix(refine): check monorepo root for lockfile and README *(27 hours ago)*

---

## ðŸŽ¯ Next Action

**ðŸ”´ Fix 1 critical issue(s) immediately**

> Critical issues may cause runtime errors or security vulnerabilities

---

## ðŸš« Do Not

- Do not commit without running typecheck first
- Do not push directly to main/master branch
- Do not ignore TypeScript errors with @ts-ignore
- Do not use `any` type â€” use proper type definitions
- Do not use magic numbers â€” extract to named constants
- Do not write functions longer than 50 lines â€” extract helper functions
- Do not export more than 5 items per file â€” split into modules
- Do not leave console.log in production code

---

## Quick Wins

These issues can be auto-fixed in seconds:

- [ ] `index.ts:118` â€” Unexpected console statement (1 min)
- [ ] `index.ts:123` â€” Unexpected console statement (1 min)
- [ ] `index.ts:126` â€” Unexpected console statement (1 min)
- [ ] `index.ts:154` â€” Unexpected console statement (1 min)
- [ ] `index.ts:158` â€” Unexpected console statement (1 min)
- [ ] `index.ts:160` â€” Unexpected console statement (1 min)
- [ ] `index.ts:163` â€” Unexpected console statement (1 min)
- [ ] `index.ts:164` â€” Unexpected console statement (1 min)
- [ ] `index.ts:168` â€” Unexpected console statement (1 min)
- [ ] `index.ts:177` â€” Unexpected console statement (1 min)

---

## Hotspot Files

Files with the most issues:

| File | Issues | Priority |
|------|--------|----------|
| `src/commands/refactor/index.ts` | 23 | ðŸŸ  high |
| `index.ts` | 17 | ðŸŸ¢ low |
| `output/ai-native.ts` | 10 | ðŸŸ¡ medium |
| `src/commands/refactor/migration/execution.ts` | 5 | ðŸŸ¡ medium |
| `analyzers/structure.ts` | 5 | ðŸŸ¡ medium |

---

## Issues by Priority

### ðŸ”´ Critical Issues (Fix Immediately)

> These issues may cause build failures or runtime errors
> **Effort**: 14 min | **Auto-fixable**: 0/1

- [ ] `generator.ts:51` â€” Non-null assertion operator (!) (14 min)

### ðŸŸ  High Priority Issues

> These issues should be addressed in the current sprint
> **Effort**: 10h | **Auto-fixable**: 0/10

- [ ] `src/commands/refactor/index.ts` â€” File exports 8 items (max: 5) (1h)
- [ ] `src/commands/refactor/generator.ts` â€” File exports 6 items (max: 5) (1h)
- [ ] `src/commands/refactor/output/ai-native.ts` â€” File has 13 functions (max: 10) (1h)
- [ ] `src/commands/refactor/migration/index.ts` â€” File exports 7 items (max: 5) (1h)
- [ ] `src/commands/refactor/core/types.ts` â€” File exports 15 items (max: 5) (1h)
- [ ] `src/commands/refactor/core/types-ai.ts` â€” File exports 22 items (max: 5) (1h)
- [ ] `src/commands/refactor/core/options.ts` â€” File exports 6 items (max: 5) (1h)
- [ ] `src/commands/refactor/core/constants.ts` â€” File exports 6 items (max: 5) (1h)
- [ ] `src/commands/refactor/analyzers/standards.ts` â€” File has 12 functions (max: 10) (1h)
- [ ] `src/commands/refactor/analyzers/recommendations.ts` â€” File exports 6 items (max: 5) (1h)

### ðŸŸ¡ Medium Priority Issues

> Address these for better maintainability
> **Effort**: 20h | **Auto-fixable**: 0/55

- [ ] `src/commands/refactor/index.ts:41` â€” Function "runRefactor" has 62 lines (max: 50) (40 min)
- [ ] `src/commands/refactor/index.ts:140` â€” Function "applyMigrations" has 63 lines (max: 50) (40 min)
- [ ] `src/commands/refactor/index.ts:140` â€” Function "applyMigrations" has complexity 12 (max: 10) (40 min)
- [ ] `src/commands/refactor/index.ts:207` â€” Function "refactorCommand" has 55 lines (max: 50) (40 min)
- [ ] `src/commands/refactor/index.ts:207` â€” Function "refactorCommand" has complexity 11 (max: 10) (40 min)
- ... and 50 more issues

### ðŸŸ¢ Low Priority Issues (Optional)

> Nice to fix but not urgent
> **Effort**: 34 min | **Auto-fixable**: 34/34

- [ ] `index.ts:118` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:123` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:126` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:154` â€” Unexpected console statement (1 min) [AUTO]
- [ ] `index.ts:158` â€” Unexpected console statement (1 min) [AUTO]
- ... and 29 more issues

---

## Recommended Action Plan

Execute these steps in order:

#### step-1: ðŸ‘€ REVIEW ðŸ”´

**File**: `generator.ts:51`
**Effort**: 14 min

Non-null assertion operator (!)

**Current code:**
```typescript
   46: 
   47:   for (const dir of result.directories) {
   48:     if (!byCategory.has(dir.category)) {
   49:       byCategory.set(dir.category, []);
   50:     }
â†’  51:     byCategory.get(dir.category)!.push(dir);
   52:   }
   53: 
   54:   // Generate namespace entries
   55:   const namespaceEntries: string[] = [];
   56:
```

**Suggested fix:**
```diff
+ Use optional chaining (?.) or proper null checks
```

> Fix type-safety issue

#### step-2: ðŸ”„ REFACTOR ðŸŸ 

**File**: `src/commands/refactor/index.ts`
**Effort**: 1h

File exports 8 items (max: 5)

<details>
<summary>ðŸ’¡ Show suggested fix</summary>

```diff
+ Group related exports into separate modules with index.ts re-exports
```

> Fix srp issue

</details>

#### step-3: ðŸ”„ REFACTOR ðŸŸ 

**File**: `src/commands/refactor/generator.ts`
**Effort**: 1h

File exports 6 items (max: 5)

<details>
<summary>ðŸ’¡ Show suggested fix</summary>

```diff
+ Group related exports into separate modules with index.ts re-exports
```

> Fix srp issue

</details>

#### step-4: ðŸ”„ REFACTOR ðŸŸ 

**File**: `src/commands/refactor/output/ai-native.ts`
**Effort**: 1h

File has 13 functions (max: 10)

<details>
<summary>ðŸ’¡ Show suggested fix</summary>

```diff
+ Consider extracting helper functions to separate utils
```

> Fix srp issue

</details>

#### step-5: ðŸ”„ REFACTOR ðŸŸ 

**File**: `src/commands/refactor/migration/index.ts`
**Effort**: 1h

File exports 7 items (max: 5)

<details>
<summary>ðŸ’¡ Show suggested fix</summary>

```diff
+ Group related exports into separate modules with index.ts re-exports
```

> Fix srp issue

</details>

---

## File Contexts

Detailed information about affected files:

### `index.ts`

- **Purpose**: Module (main: runRefactor)
- **Type**: util
- **Metrics**: 268 lines, 4 functions, avg complexity 9

**Exports**: `printAnalysis`, `findDuplicates`, `analyzeStructure`, `visualizeStructure`, `createMigrationPlan`, `executeMigrationPlan`, `formatRefactor`, `formatMigrationPreview`, `formatAiNativeXml`

**Imports**: `./core`, `./analyzers`, `./migration`, `./output`, `../../lib`

### `output/ai-native.ts`

- **Purpose**: Module (main: formatAiNativeXml)
- **Type**: util
- **Metrics**: 409 lines, 13 functions, avg complexity 4

**Exports**: `formatAiNativeXml`

**Imports**: `../core`, `../../../lib/@formatters`

### `analyzers/structure.ts`

- **Purpose**: Module (main: analyzeStructure)
- **Type**: unknown
- **Metrics**: 374 lines, 6 functions, avg complexity 8

**Exports**: `analyzeStructure`, `visualizeStructure`

**Imports**: `../core`, `../../../lib`

---

*Use `krolik fix --ai-execute AI-REPORT.md` to execute this plan automatically.*
